<!DOCTYPE html>
<html lang="en">
<head>
          <title>pydata</title>
        <meta charset="utf-8" />
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="pydata Full Atom Feed" />
        <link href="/feeds/python.atom.xml" type="application/atom+xml" rel="alternate" title="pydata Categories Atom Feed" />



    <meta name="tags" content="python" />
    <meta name="tags" content="flask" />

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">pydata <strong>Keep Looking, Don't Settle</strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="/functions/archives.html">Archives</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="/pages/2016/06/25/deploy-flask-on-heroku/" rel="bookmark"
         title="Permalink to deploy flask on heroku">deploy flask on heroku</a></h2>
 
  </header>
  <footer class="post-info">
    <abbr class="published" title="2016-06-25T00:00:00-05:00">
      Sat 25 June 2016
    </abbr>
    <abbr class="modified" title="2016-06-25T00:00:00-05:00">
      Sat 25 June 2016
    </abbr>
    <address class="vcard author">
      By           <a class="url fn" href="/author/huiming-song.html">Huiming Song</a>
    </address>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <ol>
<li>
<p>安装git，如果已经有git，可以忽略 
    <code>sudo apt-get install git</code></p>
</li>
<li>
<p>建立一个文件夹，比如叫flask_heroku，专门用来放flask的东西
    到这个文件夹下   <code>cd flask_heroku</code></p>
</li>
<li>
<p>install pip on ubuntu if don't have it
    <code>sudo apt-get install python-pip</code></p>
</li>
<li>
<p>install virtualenv in ubuntu
    <code>sudo apt-get install python-virtualenv</code>
    on windows, you can do
    <code>pip install virtualenv</code></p>
</li>
<li>
<p>run to create temperorary enviroment called venv
    <code>sudo virtualenv venv</code>
    这时候你的flask_heroku下面会多了一个文件夹venc，下面安装所有的东西都要使用<code>venv/bin/pip</code>，不能使用系统自带的pip</p>
</li>
<li>
<p>activate the virtual enviroment
    <code>source venv/bin/activate</code>
    deactivate the virtual enviroment
    <code>deactivate</code> 
    下面用venv/bin/pip安装flask，flask-wtf和其他所有东西的时候，都要在virtual enviroment下面安装，否则requirements.txt会有问题</p>
</li>
<li>
<p>install flask(确认已经激活virtual enviroment)
    <code>venv/bin/pip install Flask</code> 
    use <code>venv/bin/pip list</code> or <code>venv/bin/pip show flask</code> to check if you have flask installed.</p>
</li>
<li>
<p>install useful packages if you want(确认已经激活virtual enviroment)
    <code>venv/bin/pip install flask-wtf
    venv/bin/pip install flask-mail</code></p>
</li>
<li>
<p>register on heroku.com to get username/password </p>
</li>
<li>
<p>download heroku toolbelt on ubuntu
    <code>wget -O- https://toolbelt.heroku.com/install-ubuntu.sh | sh</code></p>
</li>
<li>
<p>log on to heroku from your command line
    <code>heroku login</code></p>
</li>
<li>
<p>create heroku app from your command line or from the heroku.com
    from comman line  <code>heroku create my-heroku-name</code>
    from heroku.com  do it directly in https://dashboard.heroku.com/apps
    可以更改你的app的名字  https://dashboard.heroku.com/apps/pydata/settings</p>
</li>
<li>
<p>配置postgres数据库<br />
<code>heroku create my-heroku-app-cn</code></p>
</li>
<li>
<p>install prodcution web server gunicorn(确认已经激活virtual enviroment)
    <code>venv/bin/pip install gunicorn</code></p>
</li>
<li>
<p>产生必要的两个文件requirements.txt和Procfile
    产生requirements.txt    <code>venv/bin/pip freeze &gt; requirements.txt</code>
    产生Procfile    用任意文本编辑器建立一个名字为Procfile的文件，在里面输入<code>web: gunicorn app:app</code></p>
</li>
<li>
<p>git部署
    去掉不必要的文件，只留下必要的文件和文件夹
    <code>git
    git add .
    git commit -m "first flask app test"
    git push heroku master</code></p>
</li>
</ol>
<h3>Reference</h3>
<ol>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world">The Flask Mega-Tutorial, Part I: Hello, World!</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud">The Flask Mega-Tutorial, Part XVIII: Deployment on the Heroku Cloud</a></li>
<li><a href="http://xpleaf.blog.51cto.com/9315560/1739940">如何部署Python Web应用：记录一次Heroku部署完整过程</a></li>
</ol>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>