<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>enable google local custom search in pelican blog &mdash; pydata by Huiming</title>
  <meta name="author" content="shm">


    
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>





  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="/favicon.png" rel="icon">

  <link href="/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">

  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="/">pydata by Huiming</a></h1>
    <h2>Keep Looking, Don't Settle</h2>
</hgroup>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
        MathJax.Hub.Config({
            config: ["MMLorHTML.js"],
            extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js"],
            jax: ["input/TeX"],
            tex2jax: {
                inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
                processEscapes: false
            },
            TeX: {
                TagSide: "right",
                TagIndent: ".8em",
                MultLineWidth: "85%",
                equationNumbers: {
                   autoNumber: "AMS",
                },
                unicode: {
                   fonts: "STIXGeneral,'Arial Unicode MS'"
                }
            },
            showProcessingMessages: false
        });
</script></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
</ul>

<form class="search" action="/search.html">
    <input type="text" class="search-query" placeholder="Search" name="q" id="s">
</form>

<form action="https://www.google.com/search" method="get">
    <fieldset role="search">
       <input type="hidden" name="q" value="site:songhuiming.github.io" />
       <input class="search" type="text" name="q" results="0" placeholder="Search"/>
    </fieldset>
</form>


<ul class="main-navigation">
    <li><a href="/functions/archives.html">Archives</a></li>
      <li >
        <a href="/category/career-growth.html">Career growth</a>
      </li>
      <li >
        <a href="/category/linux.html">Linux</a>
      </li>
      <li class="active">
        <a href="/category/python.html">Python</a>
      </li>
      <li >
        <a href="/category/rthers.html">Rthers</a>
      </li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">enable google local custom search in pelican blog</h1>
    <p class="meta">
<time datetime="2016-03-26T00:00:00-05:00" pubdate>Sat 26 March 2016</time>    </p>
</header>

  <div class="entry-content"><p>When there are more and more blogs, it is necessary to enable search function in blog to make it easy to find the right blog. There is no search function in pelican by default. Usually there are two way to add search function.</p>
<ol>
<li>
<p>enable <a href="https://github.com/getpelican/pelican-plugins/tree/master/tipue_search">Tipue search</a></p>
</li>
<li>
<p>enable google site search</p>
</li>
</ol>
<p>Here is how to use google site search. There are two way I found:</p>
<h3>Method 1. create a search page to show the result</h3>
<p>refer to <a href="http://guozhongxin.com/pages/2014/09/25/build_blog_with_pelican.html">this blog</a>. this blog shows how to add google search with new search page.</p>
<h4>step 1. in pelicanconf.py, enable SEARCH_BOX by adding</h4>
<div class="highlight"><pre><span></span><code>SEARCH_BOX = True
</code></pre></div>

<h4>step 2. register at <a href="https://cse.google.com/cse/all">google custom search</a> for your own customed search engine.</h4>
<p><img alt="google custom search" src="/figures/20160325_google_search_01.PNG"></p>
<h4>step 3. replace the default search option by customed search engine</h4>
<p>since selected theme is pelican-octopress-theme, it needs to replace the original search option by the created search.html, the step is in <code>blog/pelican-themes/pelican-octopress-theme/templates/_includes/navigation.html</code>, find the default search option</p>
<div class="highlight"><pre><span></span><code><span class="cp">{%</span> <span class="k">if</span> <span class="nv">SEARCH_BOX</span> <span class="cp">%}</span>
<span class="nt">&lt;form</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;search&quot;</span><span class="w"> </span><span class="na">action=</span><span class="s">&quot;/search.html&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;text&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;search-query&quot;</span><span class="w"> </span><span class="na">placeholder=</span><span class="s">&quot;Search&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;q&quot;</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;s&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">SEARCH_BOX</span> <span class="cp">%}</span>
<span class="nt">&lt;form</span><span class="w"> </span><span class="na">action=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">SITESEARCH</span><span class="o">|</span><span class="nf">default</span><span class="o">(</span><span class="s1">&#39;https://www.google.com/search&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">method=</span><span class="s">&quot;get&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;fieldset</span><span class="w"> </span><span class="na">role=</span><span class="s">&quot;search&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="cp">{%</span> <span class="k">if</span> <span class="s1">&#39;duckduckgo.com&#39;</span> <span class="k">in</span> <span class="nv">SITESEARCH</span><span class="o">|</span><span class="nf">lower</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;hidden&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;sites&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">SITEURL</span><span class="o">|</span><span class="nf">replace</span><span class="o">(</span><span class="s1">&#39;https://&#39;</span><span class="o">,</span><span class="s1">&#39;&#39;</span><span class="o">)|</span><span class="nf">replace</span><span class="o">(</span><span class="s1">&#39;http://&#39;</span><span class="o">,</span><span class="s1">&#39;&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;hidden&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;sitesearch&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">SITEURL</span><span class="o">|</span><span class="nf">replace</span><span class="o">(</span><span class="s1">&#39;https://&#39;</span><span class="o">,</span><span class="s1">&#39;&#39;</span><span class="o">)|</span><span class="nf">replace</span><span class="o">(</span><span class="s1">&#39;http://&#39;</span><span class="o">,</span><span class="s1">&#39;&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;search&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;text&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;q&quot;</span><span class="w"> </span><span class="na">results=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">placeholder=</span><span class="s">&quot;Search&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/fieldset&gt;</span>
<span class="nt">&lt;/form&gt;</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</code></pre></div>

<p>and replace it with the following code to use the search.html</p>
<div class="highlight"><pre><span></span><code><span class="cp">{%</span> <span class="k">if</span> <span class="nv">SEARCH_BOX</span> <span class="cp">%}</span>
<span class="nt">&lt;form</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;search&quot;</span><span class="w"> </span><span class="na">action=</span><span class="s">&quot;/search.html&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;text&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;search-query&quot;</span><span class="w"> </span><span class="na">placeholder=</span><span class="s">&quot;Search&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;q&quot;</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;s&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</code></pre></div>

<h4>step 4. create the <code>search.html</code> in the blog/output folder with the following code</h4>
<div class="highlight"><pre><span></span><code><span class="o">&lt;!</span><span class="n">DOCTYPE</span><span class="w"> </span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="w"> </span><span class="n">lang</span><span class="o">=</span><span class="s2">&quot;zh_CN&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">meta</span><span class="w"> </span><span class="n">charset</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="err">站内搜索</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">style</span><span class="o">&gt;</span>
<span class="c1">#search-box {</span>
<span class="w">    </span><span class="n">position</span><span class="p">:</span><span class="w"> </span><span class="n">relative</span><span class="p">;</span>
<span class="w">    </span><span class="n">width</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="o">%</span><span class="p">;</span>
<span class="w">    </span><span class="n">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="n">em</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">#search-form {</span>
<span class="w">    </span><span class="n">height</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="n">px</span><span class="p">;</span>
<span class="w">    </span><span class="n">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="n">px</span><span class="w"> </span><span class="n">solid</span><span class="w"> </span><span class="c1">#999;</span>
<span class="w">    </span><span class="o">-</span><span class="n">webkit</span><span class="o">-</span><span class="n">border</span><span class="o">-</span><span class="n">radius</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="n">px</span><span class="p">;</span>
<span class="w">    </span><span class="o">-</span><span class="n">moz</span><span class="o">-</span><span class="n">border</span><span class="o">-</span><span class="n">radius</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="n">px</span><span class="p">;</span>
<span class="w">    </span><span class="n">border</span><span class="o">-</span><span class="n">radius</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="n">px</span><span class="p">;</span>
<span class="w">    </span><span class="n">background</span><span class="o">-</span><span class="n">color</span><span class="p">:</span><span class="w"> </span><span class="c1">#fff;</span>
<span class="w">    </span><span class="n">overflow</span><span class="p">:</span><span class="w"> </span><span class="n">hidden</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">#search-text {</span>
<span class="w">    </span><span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="n">px</span><span class="p">;</span>
<span class="w">    </span><span class="n">color</span><span class="p">:</span><span class="w"> </span><span class="c1">#ddd;</span>
<span class="w">    </span><span class="n">border</span><span class="o">-</span><span class="n">width</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">background</span><span class="p">:</span><span class="w"> </span><span class="n">transparent</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">#search-box input[type=&quot;text&quot;] {</span>
<span class="w">    </span><span class="n">width</span><span class="p">:</span><span class="w"> </span><span class="mi">90</span><span class="o">%</span><span class="p">;</span>
<span class="w">    </span><span class="n">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="n">px</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">12</span><span class="n">px</span><span class="w"> </span><span class="mi">1</span><span class="n">em</span><span class="p">;</span>
<span class="w">    </span><span class="n">color</span><span class="p">:</span><span class="w"> </span><span class="c1">#333;</span>
<span class="w">    </span><span class="n">outline</span><span class="p">:</span><span class="w"> </span><span class="n">none</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">&lt;/</span><span class="n">style</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">div</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="s1">&#39;search-box&#39;</span><span class="o">&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="n">form</span><span class="w"> </span><span class="n">action</span><span class="o">=</span><span class="s1">&#39;/search.html&#39;</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="s1">&#39;search-form&#39;</span><span class="w"> </span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;get&#39;</span><span class="w"> </span><span class="n">target</span><span class="o">=</span><span class="s1">&#39;_top&#39;</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="n">input</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="s1">&#39;search-text&#39;</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;q&#39;</span><span class="w"> </span><span class="n">placeholder</span><span class="o">=</span><span class="s1">&#39;Search&#39;</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="o">/&gt;</span>
<span class="w">  </span><span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">div</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="s2">&quot;cse&quot;</span><span class="w"> </span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;width: 100%;&quot;</span><span class="o">&gt;</span><span class="n">Loading</span><span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">script</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="s2">&quot;http://www.google.com/jsapi&quot;</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">script</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span><span class="w"> </span>
<span class="w">  </span><span class="n">google</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;search&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="n">language</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;zh-CN&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">google</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">themes</span><span class="o">.</span><span class="n">V2_DEFAULT</span><span class="p">});</span>
<span class="w">  </span><span class="n">google</span><span class="o">.</span><span class="n">setOnLoadCallback</span><span class="p">(</span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">customSearchOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span><span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">customSearchControl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">google</span><span class="o">.</span><span class="n">search</span><span class="o">.</span><span class="n">CustomSearchControl</span><span class="p">(</span>
<span class="w">      </span><span class="s1">&#39;012191777864628038963:**********&lt;!using your own google custom search id&gt;&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">customSearchOptions</span><span class="p">);</span>
<span class="w">    </span><span class="n">customSearchControl</span><span class="o">.</span><span class="n">setResultSetSize</span><span class="p">(</span><span class="n">google</span><span class="o">.</span><span class="n">search</span><span class="o">.</span><span class="n">Search</span><span class="o">.</span><span class="n">FILTERED_CSE_RESULTSET</span><span class="p">);</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">google</span><span class="o">.</span><span class="n">search</span><span class="o">.</span><span class="n">DrawOptions</span><span class="p">();</span>
<span class="w">    </span><span class="n">options</span><span class="o">.</span><span class="n">enableSearchResultsOnly</span><span class="p">();</span><span class="w"> </span>
<span class="w">    </span><span class="n">customSearchControl</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s1">&#39;cse&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="p">);</span>
<span class="w">    </span><span class="n">function</span><span class="w"> </span><span class="n">parseParamsFromUrl</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">var</span><span class="w"> </span><span class="n">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="w">      </span><span class="k">var</span><span class="w"> </span><span class="n">parts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">window</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">search</span><span class="o">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\x26</span><span class="s1">&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">parts</span><span class="o">.</span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">keyValuePair</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decodeURIComponent</span><span class="p">(</span><span class="n">keyValuePair</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">        </span><span class="n">params</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">keyValuePair</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="err">?</span>
<span class="w">            </span><span class="n">decodeURIComponent</span><span class="p">(</span><span class="n">keyValuePair</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="o">/</span>\<span class="o">+/</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="p">))</span><span class="w"> </span><span class="p">:</span>
<span class="w">            </span><span class="n">keyValuePair</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">params</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">urlParams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseParamsFromUrl</span><span class="p">();</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">queryParamName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;q&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">urlParams</span><span class="p">[</span><span class="n">queryParamName</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">customSearchControl</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">urlParams</span><span class="p">[</span><span class="n">queryParamName</span><span class="p">]);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="bp">true</span><span class="p">);</span>
<span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div>

<p>after this is done, there will be a search box like
<img alt="google custom search" src="/figures/20160325_google_search_02.PNG"></p>
<p>and the result is like
<img alt="google custom search" src="/figures/20160325_google_search_03.PNG"></p>
<h3>Method 2. to search in google directly with keyword like <code>site:songhuiming.github.io piecewise</code>.</h3>
<p>go to <code>naviation.html</code> to change the <code>SEARCH_BOX</code> option. go to <code>blog/pelican-themes/pelican-octopress-theme/templates/_includes/navigation.html</code>, find the default search option</p>
<div class="highlight"><pre><span></span><code><span class="cp">{%</span> <span class="k">if</span> <span class="nv">SEARCH_BOX</span> <span class="cp">%}</span>
<span class="nt">&lt;form</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;search&quot;</span><span class="w"> </span><span class="na">action=</span><span class="s">&quot;/search.html&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;text&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;search-query&quot;</span><span class="w"> </span><span class="na">placeholder=</span><span class="s">&quot;Search&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;q&quot;</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;s&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">SEARCH_BOX</span> <span class="cp">%}</span>
<span class="nt">&lt;form</span><span class="w"> </span><span class="na">action=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">SITESEARCH</span><span class="o">|</span><span class="nf">default</span><span class="o">(</span><span class="s1">&#39;https://www.google.com/search&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">method=</span><span class="s">&quot;get&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;fieldset</span><span class="w"> </span><span class="na">role=</span><span class="s">&quot;search&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="cp">{%</span> <span class="k">if</span> <span class="s1">&#39;duckduckgo.com&#39;</span> <span class="k">in</span> <span class="nv">SITESEARCH</span><span class="o">|</span><span class="nf">lower</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;hidden&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;sites&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">SITEURL</span><span class="o">|</span><span class="nf">replace</span><span class="o">(</span><span class="s1">&#39;https://&#39;</span><span class="o">,</span><span class="s1">&#39;&#39;</span><span class="o">)|</span><span class="nf">replace</span><span class="o">(</span><span class="s1">&#39;http://&#39;</span><span class="o">,</span><span class="s1">&#39;&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;hidden&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;sitesearch&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">SITEURL</span><span class="o">|</span><span class="nf">replace</span><span class="o">(</span><span class="s1">&#39;https://&#39;</span><span class="o">,</span><span class="s1">&#39;&#39;</span><span class="o">)|</span><span class="nf">replace</span><span class="o">(</span><span class="s1">&#39;http://&#39;</span><span class="o">,</span><span class="s1">&#39;&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;search&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;text&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;q&quot;</span><span class="w"> </span><span class="na">results=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">placeholder=</span><span class="s">&quot;Search&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/fieldset&gt;</span>
<span class="nt">&lt;/form&gt;</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</code></pre></div>

<p>and replace it with the following code to use the search.html</p>
<div class="highlight"><pre><span></span><code><span class="cp">{%</span> <span class="k">if</span> <span class="nv">SEARCH_BOX</span> <span class="cp">%}</span>
<span class="nt">&lt;form</span><span class="w"> </span><span class="na">action=</span><span class="s">&quot;https://www.google.com/search&quot;</span><span class="w"> </span><span class="na">method=</span><span class="s">&quot;get&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;fieldset</span><span class="w"> </span><span class="na">role=</span><span class="s">&quot;search&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;hidden&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;q&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;site:songhuiming.github.io&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;search&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;text&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;q&quot;</span><span class="w"> </span><span class="na">results=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">placeholder=</span><span class="s">&quot;Search&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/fieldset&gt;</span>
<span class="nt">&lt;/form&gt;</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</code></pre></div>

<p>The output will be like
<img alt="google custom search" src="/figures/20160325_google_search_04.PNG"></p></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">
        <a href="/author/huiming-song.html">Huiming Song</a>
    </span>
  </span>
<time datetime="2016-03-26T00:00:00-05:00" pubdate>Sat 26 March 2016</time>  <span class="categories">
    <a class='category' href='/category/python.html'>Python</a>
  </span>
  <span class="categories">
    <a class="category" href="/tag/python.html">python</a>,    <a class="category" href="/tag/pelican.html">pelican</a>  </span>
</p><div class="sharing">
</div>    </footer>
  </article>

</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="/pages/2025/02/18/deepseek-v3-2/">DeepSeek V3-2</a>
      </li>
      <li class="post">
          <a href="/pages/2025/02/16/deepseek-v3/">DeepSeek V3</a>
      </li>
      <li class="post">
          <a href="/pages/2023/10/01/image-generation-2-latent-diffusion-model-stable-diffusion/">Image Generation 2: Latent Diffusion model / Stable Diffusion</a>
      </li>
      <li class="post">
          <a href="/pages/2023/07/04/image-generation-1-diffusion-model/">Image Generation 1: Diffusion model</a>
      </li>
      <li class="post">
          <a href="/pages/2023/05/28/gpt-1-gpt-2-gpt-3-instructgpt-chatgpt-and-gpt-4-summary/">GPT-1, GPT-2, GPT-3, InstructGPT / ChatGPT and GPT-4 summary</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="/category/career-growth.html">career growth</a></li>
        <li><a href="/category/linux.html">Linux</a></li>
        <li><a href="/category/python.html">python</a></li>
        <li><a href="/category/rthers.html">Rthers</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
    <a href="/tag/python.html">python</a>,    <a href="/tag/ai.html">AI</a>,    <a href="/tag/llm.html">LLM</a>,    <a href="/tag/aig.html">AIG</a>,    <a href="/tag/data-mining.html">data mining</a>,    <a href="/tag/sklearn.html">sklearn</a>,    <a href="/tag/pytorch.html">pytorch</a>,    <a href="/tag/career-growth.html">career growth</a>,    <a href="/tag/linux.html">linux</a>,    <a href="/tag/deep-learning.html">deep learning</a>,    <a href="/tag/leetcode.html">leetcode</a>,    <a href="/tag/dynamic-programming.html">dynamic programming</a>,    <a href="/tag/flask.html">flask</a>,    <a href="/tag/highcharts.html">highcharts</a>,    <a href="/tag/sql.html">sql</a>,    <a href="/tag/webcrawl.html">webCrawl</a>,    <a href="/tag/random-walk.html">random walk</a>,    <a href="/tag/multiprocessing.html">multiprocessing</a>,    <a href="/tag/data-visualization.html">data visualization</a>,    <a href="/tag/numpy.html">numpy</a>,    <a href="/tag/tensorflow.html">tensorflow</a>,    <a href="/tag/quant.html">quant</a>,    <a href="/tag/statsmodels.html">statsmodels</a>,    <a href="/tag/pandas.html">pandas</a>,    <a href="/tag/docker.html">docker</a>,    <a href="/tag/matplotlib.html">matplotlib</a>,    <a href="/tag/data-minging.html">data minging</a>,    <a href="/tag/remote-access.html">remote access</a>,    <a href="/tag/mysql.html">mysql</a>,    <a href="/tag/base.html">base</a>,    <a href="/tag/tweepy.html">tweepy</a>,    <a href="/tag/bokeh.html">bokeh</a>,    <a href="/tag/sentiment-analysis.html">sentiment analysis</a>,    <a href="/tag/map.html">map</a>,    <a href="/tag/apply.html">apply</a>,    <a href="/tag/apply_async.html">apply_async</a>,    <a href="/tag/git.html">git</a>,    <a href="/tag/pyqt.html">PyQt</a>,    <a href="/tag/cx_freeze.html">cx_freeze</a>,    <a href="/tag/tkinter.html">tkinter</a>,    <a href="/tag/pelican.html">pelican</a>,    <a href="/tag/spyre.html">spyre</a>,    <a href="/tag/shiny.html">shiny</a>,    <a href="/tag/r.html">R</a>,    <a href="/tag/re.html">re</a>  </section>


    <section>
        <h1>Social</h1>
        <ul>
            <li><a href="https://www.linkedin.com/pub/huiming-song/24/735/349" target="_blank">Linkedin</a></li>
        </ul>
    </section>
    <section>
        <h1>Blogroll</h1>
        <ul>
            <li><a href="http://easysas.blogspot.com/" target="_blank">my old SAS blog</a></li>
        </ul>
    </section>

</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2015&ndash;2025  shm &mdash;
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
  <script src="/theme/js/modernizr-2.0.js"></script>
  <script src="/theme/js/ender.js"></script>
  <script src="/theme/js/octopress.js" type="text/javascript"></script>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-65938411-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-65938411-1');
    ga('send', 'pageview');
</script>
  <script type="text/javascript">
    var disqus_shortname = 'songhuiming';
    var disqus_identifier = '/pages/2016/03/26/enable-google-local-custom-search-in-pelican-blog/';
    var disqus_url = '/pages/2016/03/26/enable-google-local-custom-search-in-pelican-blog/';
    var disqus_title = 'enable google local custom search in pelican blog';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = "//" + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
  </script>
</body>
</html>